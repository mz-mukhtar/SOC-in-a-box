# üõ°Ô∏è Virtual Network Defense Lab (SOC-in-a-Box)
### Enterprise-Grade Intrusion Detection System & Network Traffic Analysis

![Badge](https://img.shields.io/badge/Platform-VirtualBox-blue?style=for-the-badge&logo=virtualbox)
![Badge](https://img.shields.io/badge/OS-Kali%20Linux-black?style=for-the-badge&logo=kalilinux)
![Badge](https://img.shields.io/badge/IDS-Suricata-red?style=for-the-badge&logo=target)
![Badge](https://img.shields.io/badge/Visualization-EveBox-orange?style=for-the-badge)
![Badge](https://img.shields.io/badge/Status-Educational-green?style=for-the-badge)

---

## üë§ About the Author

**Mahi Zeki**  
*Electrical and Computer Engineering Student (Communication Engineering Focus)*  
*Addis Ababa University (AAU) - CTBE*  
*Cyber Club Lead*

> "As an engineering student and community lead, I built this project to bridge the gap between networking theory and real-world cyber defense. This lab simulates a corporate network architecture to analyze traffic flow, detect anomalies, and visualize threats in real-time."

---

## üìñ Project Overview

This repository documents the construction of a **Virtual SOC (Security Operations Center)**.

Instead of a simple "flat" network, this project builds a realistic **Gateway Architecture**. It forces all internal traffic through a custom Linux Router (Gateway), where a Suricata IDS (Intrusion Detection System) inspects packets before they reach the internet or other internal servers.

### üéØ Key Objectives
*   **Network Engineering:** Configuring Linux routing, IP forwarding, and NAT tables manually.
*   **Traffic Visibility:** Implementing a "Chokepoint" architecture to monitor 100% of network traffic.
*   **Threat Detection:** deploying Suricata to detect Nmap scans, malware beacons, and anomalies.
*   **Data Visualization:** Using EveBox to transform raw JSON logs into a modern SOC dashboard.

---

## üèóÔ∏è Network Topology

The system uses **VirtualBox Internal Networking** to isolate the "Victim" and "Attacker" machines from the host, forcing them to communicate solely through the Gateway.

```mermaid
graph TD
    Internet((Internet))
    
    subgraph "Host Machine"
        NAT[VirtualBox NAT]
    end

    subgraph "Gateway VM (Kali Main)"
        ETH0[eth0: 10.0.2.x]
        ETH1[eth1: 192.168.1.1]
        SURICATA[üõ°Ô∏è Suricata IDS]
        EVEBOX[üìä EveBox Dashboard]
    end

    subgraph "Internal Lab Network (192.168.1.0/24)"
        SERVER[üéØ Target Server<br/>.10]
        ATTACKER[üè¥‚Äç‚ò†Ô∏è Attacker VM<br/>.20]
    end

    Internet <--> NAT <--> ETH0
    ETH0 <--> SURICATA
    SURICATA <--> ETH1
    ETH1 <--> SERVER
    ETH1 <--> ATTACKER
```

---

## üõ†Ô∏è Technology Stack

| Component | Role | Description |
| :--- | :--- | :--- |
| **VirtualBox** | Hypervisor | Creates the isolated hardware environment. |
| **Kali Linux** | OS | Used for Gateway, Server, and Attacker nodes. |
| **Suricata** | IDS Engine | Performs deep packet inspection (DPI) and signature matching. |
| **EveBox** | SIEM / GUI | Web-based interface for alerting and threat hunting. |
| **Iptables** | Firewall | Handles NAT (Masquerading) and routing rules. |
| **JSON (Eve.json)** | Logging | Structured log format used for data ingestion. |

---

## üöÄ Getting Started (Quick Summary)

*For the full step-by-step implementation guide, please refer to the [Detailed Documentation](#) in this repository.*

### 1. The Gateway Setup
The Gateway is the brain of the operation. It must route traffic between the isolated LAN and the Internet.
```bash
# Enable IP Forwarding (Routing)
sudo sysctl -w net.ipv4.ip_forward=1

# Configure NAT (Allow internal VMs to access internet)
sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
```

### 2. The IDS Configuration (Suricata)
We configure Suricata to listen specifically on the internal interface (`eth1`) to capture traffic *before* it gets NAT'd.
```bash
# Point Suricata to the Internal Interface
sudo suricata -i eth1 -D
```

### 3. The Dashboard (EveBox)
We use EveBox to read the `eve.json` file generated by Suricata.
```bash
# Start the Web Server
sudo evebox server --input /var/log/suricata/eve.json --no-auth
```
*Access via browser at: `http://localhost:5636`*

---

## üì∏ Screenshots

### 1. The EveBox Dashboard
*(Place a screenshot here of the EveBox "Alerts" tab showing an Nmap scan)*

### 2. Network Traffic Analysis
*(Place a screenshot here of the "Flow" tab showing traffic between .20 and .10)*

---

## üß† What I Learned

Building this lab reinforced several core engineering concepts:
1.  **OSI Model Layer 3:** How routing tables and gateways actually function beyond "plug and play."
2.  **Network Security Monitoring (NSM):** The importance of placing sensors at the correct network chokepoints.
3.  **Log Analysis:** How to parse structured JSON logs to reconstruct an attack timeline.
4.  **Linux Administration:** Managing persistent network interfaces using `nmcli` and `sysctl`.

---

## ü§ù Connect

If you found this project interesting or have questions about setting up your own lab, feel free to reach out!

*   **Mahi Zeki**
*   *Addis Ababa University (AAU)*
*   [LinkedIn Profile](#) *(Add your link)*
*   [GitHub Profile](#) *(Add your link)*

---

## üìú License

This project is open source and available under the **MIT License**.

You are free to use, modify, and distribute this code and documentation for educational and professional purposes. I only ask that you provide attribution to the original author.

**¬© 2026 Mahi Zeki**

See the [LICENSE](LICENSE) file for more details.

---
